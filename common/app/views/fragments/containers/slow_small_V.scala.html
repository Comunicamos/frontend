@(collection: model.Collection, containerIndex: Int)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping, config: model.Config)

@import views.support.{GetClasses, FourColumns}
@import views.html.fragments.containers.show_more
@import views.html.fragments.items.facia_cards.standard
@import views.html.fragments.items.facia_cards.list
@import model.FaciaComponentName
@import common.LinkTo

@defining((config.displayName.orElse(collection.displayName), config.href.orElse(collection.href))) { case (title, href) =>

    @defining(templateDeduping(4, collection.items)) { items =>
        @if(items.nonEmpty) {
            <section
            id="@FaciaComponentName(config, collection)"
            class="@GetClasses.forNewStyleContainer(config, containerIndex == 0, title.nonEmpty)"
            data-link-name="@FaciaComponentName(config, collection)"
            data-id="@config.id"
            @config.sponsorshipKeyword.map { keyword =>
                data-keywords="@keyword"
            }
            data-component="@FaciaComponentName(config, collection)">
                <div class="facia-container__inner">
                    <div class="container__header">
                    @title.map { title =>
                        <h2 class="container__title">
                            @href.map { href =>
                            <a class="container__title__label u-text-hyphenate" data-link-name="section heading" href="@LinkTo{/@href}">@Html(title)</a>
                            }.getOrElse{
                                <span class="container__title__label u-text-hyphenate">@Html(title)</span>
                            }
                        </h2>
                    }
                    </div>
                    <div class="container__body container--rolled-up-hide">
                        <div class="facia-slice-wrapper">
                            <ul class="u-unstyled l-row l-row--items-2 l-row--layout-m facia-slice">
                                <li class="facia-slice__item facia-slice__item--volume-0 l-row__item">
                                    <ul class="u-unstyled item-list">
                                        @items.slice(1, 5).zipWithIndex.map{ case (trail, index) =>
                                            <li class="item-list__item">
                                                @list(trail, index + 3, containerIndex)
                                            </li>
                                        }
                                    </ul>
                                </li>

                                @items.take(1).zipWithIndex.map{ case (trail, index) =>
                                    @standard(trail, index + 3, containerIndex)
                                }
                            </ul>
                            @defining(items.slice(5, 24)) { items =>
                                @show_more(items, 5, containerIndex, FourColumns)
                            }
                        </div>
                    </div>
                </div>
            </section>
        }
    }
}
