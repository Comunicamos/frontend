@(collection: Collection, containerLayout: layout.ContainerLayout, containerIndex: Int, actualDate: org.joda.time.DateTime, page: model.MetaData, nav: PreviousAndNext)(implicit request: RequestHeader, templateDeduping: TemplateDeduping, config: Config)

@import model.{Collection, Config}
@import views.html.fragments.containers.facia_cards.{slice, date}
@import views.html.fragments.keywordList
@import views.support.MostPopularTags.topTags
@import views.support.{GetClasses, PreviousAndNext, TemplateDeduping}
@import common.LinkTo

@defining(page.webTitle) { case (webTitle) =>
    <section
        class="@GetClasses.forNewStyleContainer(config, false, webTitle.nonEmpty, Seq("fc-container--first"))"
        data-link-name="all index"
        @config.sponsorshipKeyword.map { keyword =>
        data-keywords="@keyword"
        }
        data-component="all index">
        <div class="facia-container__inner">
            <div class="fc-container__header js-container-header">
                <div class="fc-container__header__title">
                    <span class="u-text-hyphenate">@Html(webTitle)</span>
                    @date(actualDate)
                </div>
            </div>
            <div class="container__body container--rolled-up-hide">
                @for(sliceWithCards <- containerLayout.slices) {
                    @slice(sliceWithCards, containerIndex)
                }

                @if(nav.isDefined) {
                    <div class="pagination u-cf">
                        <ol class="u-unstyled pagination__links">
                            <li class="pagination__item pagination__item--next">
                                @nav.prev.map{ prev => <a rel="prev" href="@LinkTo{@prev}">Older</a> }
                            </li>

                            <li class="pagination__item pagination__item--prev">
                                @nav.next.map{ next => <a rel="next" href="@LinkTo{@next}">Newer</a> }
                            </li>
                        </ol>
                    </div>
                }
            </div>
            @defining(topTags(collection.items).filterNot(_.id == page.id).take(20)) { tags =>
                @if(tags.nonEmpty) {
                    <div class="related-keywords">
                        @keywordList(tags, 5, "See also")
                    </div>
                }
            }
        </div>
    </section>
}
