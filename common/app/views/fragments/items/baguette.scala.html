@(trail: model.Trail, index: Int)(implicit request: RequestHeader)

@import common.LinkTo
@import model.Video
@import views.html.fragments.media.video
@import views.support.{GetClasses, SnapData, Item620}

<div
    class="@GetClasses.forItem(trail, true) baguette"
    data-link-name="trail | @{index + 1}"
    @SnapData(trail)
>

    <div class="item__container">
        @trail match {
            case v: Video if v.mainVideo.isDefined => {
                @video(v.mainVideo.get, Item620, v.webTitle, 620, 350, true, false, Some(v.endSlatePath))
                <a @LinkTo(trail).map{url=>href=@url} class="item__link" data-link-name="article">
                    @fragments.items.elements.title(trail, index, 0)
                </a>
            }
            case _ => {
                <a @LinkTo(trail).map{url=>href=@url} class="item__link" data-link-name="article">
                    @fragments.items.elements.image(trail, inlineImage = true, maxWidth = 940)
                    @fragments.items.elements.title(trail, index, 0)
                </a>
            }
        }

        @trail match { case content:model.Content => @fragments.items.elements.starRating(content) }

        @trail.trailText.map { text =>
            <div class="baguette__standfirst">@Html(text)</div>
        }
    </div>

    @fragments.items.elements.supporting(trail.supporting, trail, style = "fullwidth")

</div>
