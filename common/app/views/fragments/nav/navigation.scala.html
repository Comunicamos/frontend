@(metaData: model.MetaData)(implicit request: RequestHeader)
@import common._

@defining(Edition(request).navigation) { navigation =>
    @defining(Edition(request).briefNav) { briefNav =>
        <div class="@RenderClasses(Map(
                        ("navigation", true),
                        ("navigation--collapsed", true),
                        ("navigation--has-signposting", !Edition.isEditionFront),
                        ("navigation--has-local-navigation", Navigation.localLinks(navigation, metaData).nonEmpty)
                    ))">
            <div class="gs-container">
                <div class="navigation__inner">
                    <div class="navigation__scroll">
                        <nav class="navigation__container navigation__container--first"
                             aria-label="Current section" role="navigation">
                            @if(!Edition.isEditionFront){
                                @fragments.nav.signposting(metaData, navigation)

                                @Navigation.topLevelItem(navigation, metaData).map{ topSection =>
                                    @if(Navigation.localLinks(navigation, metaData).nonEmpty) {
                                        <ul class="local-navigation">
                                            @Navigation.rotatedLocalNav(topSection, metaData).map{ link =>
                                                <li class="local-navigation__item"><a class="local-navigation__action" href="@LinkTo(link.href)" data-link-name="nav : secondary : @link.title">@Html(link.title)</a></li>
                                            }
                                        </ul>
                                    }
                                }
                            }
                        </nav>
                        <nav class="navigation__container navigation__container--second"
                             aria-label="Guardian sections" role="navigation">
                            <ul class="top-navigation">
                                @defining(Navigation.topLevelItem(navigation, metaData)){ topSection =>
                                    @briefNav.filterNot(Navigation.isEditionFront(_)).map{ nav =>
                                        <li class="@RenderClasses(Map(
                                                ("top-navigation__item", true),
                                                ("top-navigation__item--current", topSection.exists(_ == nav))
                                            ))">
                                            <a class="top-navigation__action" href="@LinkTo(nav.name.href)" data-link-name="nav : primary : @nav.name.title">
                                                @Html(nav.name.title)
                                                @if(nav.currentFor(metaData)){
                                                    <span class="u-h">selected</span>
                                                }
                                            </a>
                                        </li>
                                    }
                                }
                            </ul>
                        </nav>
                    </div>
                    <a class="navigation__toggle js-navigation-toggle" href="#footer-nav" data-link-name="nav : allSections">
                        <i class="navigation__toggle-burger honest-burger"><i></i><i></i><i></i></i>
                        <span class="navigation__toggle-label navigation__toggle-label--open">all<span class="navigation__toggle-label__extra"> sections</span></span>
                        <span class="navigation__toggle-label navigation__toggle-label--close">close</span>
                    </a>
                </div>
                <div class="navigation__expandable">
                    <div class="js-mega-nav-placeholder"></div>
                </div>
            </div>
        </div>
    }
}
